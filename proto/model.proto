syntax = "proto3";

package protocir;
option java_package = "org.jacodb.impl.grpc";

import "setup.proto";
import "type.proto";
import "opgen.proto";

message CIRBlockList {
  repeated CIRBlock block = 1;
}

message CIRBlock {
  CIRBlockID id = 1;
  repeated CIROp operations = 2;
  repeated CIRTypeID argument_types = 3;
}

message CIRFunction {
  CIRFunctionID id = 1;
  CIRBlockList blocks = 2;
  CIRFuncOp info = 3;
}

message CIRGlobal {
  CIRGlobalID id = 1;
  CIRGlobalOp info = 3;
}

message CIRModule {
  CIRModuleID id = 1;
  repeated CIRFunction functions = 2;
  repeated CIRGlobal globals = 3;
  repeated CIRType types = 4;
}
